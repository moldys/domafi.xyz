<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Domafi.xyz â€“ DomainFi Bank</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.10.0/dist/ethers.min.js"></script>
</head>

<body class="bg-slate-50 text-slate-800">

<header class="bg-white shadow">
<div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
<h1 class="text-xl font-bold">DOMAFI</h1>
<button id="connectBtn" class="bg-blue-600 text-white px-4 py-2 rounded-xl">Connect Wallet</button>
</div>
</header>

<div class="max-w-6xl mx-auto p-6 grid md:grid-cols-2 gap-6">

<!-- GAS -->
<div class="bg-white p-5 rounded-xl shadow">
<h3 class="font-bold mb-2">Gas Terminal</h3>
<div id="gas">Gas: --</div>
</div>

<!-- STAKE -->
<div class="bg-white p-5 rounded-xl shadow">
<h3 class="font-bold mb-2">Stake DOMA</h3>
<input id="stakeAmount" placeholder="Amount" class="border p-2 w-full mb-2">
<button onclick="stake()" class="bg-green-600 text-white w-full py-2 rounded">Stake</button>
<button onclick="unstake()" class="bg-red-500 text-white w-full py-2 rounded mt-2">Unstake</button>
<div id="stakeInfo" class="mt-2 text-sm text-slate-500"></div>
</div>

<!-- VAULT -->
<div class="bg-white p-5 rounded-xl shadow">
<h3 class="font-bold mb-2">Domain Vault</h3>
<input id="domainName" placeholder="yourdomain.xyz" class="border p-2 w-full mb-2">
<input id="domainValue" placeholder="USD Value" class="border p-2 w-full mb-2">
<button onclick="depositDomain()" class="bg-blue-600 text-white w-full py-2 rounded">Deposit Domain</button>
<div id="vaultInfo" class="mt-2 text-sm text-slate-500"></div>
</div>

<!-- BORROW -->
<div class="bg-white p-5 rounded-xl shadow">
<h3 class="font-bold mb-2">Borrow USDC</h3>
<input id="borrowAmount" placeholder="Borrow Amount" class="border p-2 w-full mb-2">
<button onclick="borrow()" class="bg-purple-600 text-white w-full py-2 rounded">Borrow</button>
<div id="borrowInfo" class="mt-2 text-sm text-slate-500"></div>
</div>

</div>

<script>
let provider, signer;
let staked = 0;
let vaultValue = 0;
let borrowed = 0;

async function connectWallet(){
  provider = new ethers.BrowserProvider(window.ethereum);
  signer = await provider.getSigner();
  document.getElementById("connectBtn").innerText =
    (await signer.getAddress()).slice(0,6)+"...";
  estimateGas();
}

async function estimateGas(){
  const gas = await provider.getFeeData();
  document.getElementById("gas").innerText =
    "Gas: "+(Number(gas.gasPrice)/1e9).toFixed(2)+" gwei";
}

function stake(){
  let amt = Number(stakeAmount.value);
  staked += amt;
  stakeInfo.innerText = "Total staked: "+staked+" DOMA | APR 18%";
}

function unstake(){
  staked = 0;
  stakeInfo.innerText = "Unstaked all";
}

function depositDomain(){
  let val = Number(domainValue.value);
  vaultValue = val;
  vaultInfo.innerText = domainName.value+" locked. Value: $"+val;
}

function borrow(){
  let amt = Number(borrowAmount.value);
  if(amt > vaultValue*0.6){ 
    borrowInfo.innerText="Borrow limit exceeded (max 60%)";
    return;
  }
  borrowed += amt;
  borrowInfo.innerText="Borrowed: $"+borrowed+" USDC";
}
</script>

</body>
</html>


